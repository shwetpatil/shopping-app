(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6813:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(151),s(1824),s(7824);var r=s(3282),a=s(5736),i=s(3906),l=s.n(i),n=s(6880),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,151)),"/Users/siddharthy/Shweta-S/Learn/shopping-app/apps/mfe-products/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,1824)),"/Users/siddharthy/Shweta-S/Learn/shopping-app/apps/mfe-products/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7824,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/siddharthy/Shweta-S/Learn/shopping-app/apps/mfe-products/src/app/page.tsx"],u="/page",h={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},406:(e,t,s)=>{Promise.resolve().then(s.bind(s,7974))},7974:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(3227),a=s(3677),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let s=(0,a.forwardRef)(({color:s="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,...u},h)=>(0,a.createElement)("svg",{ref:h,...i,width:r,height:r,stroke:s,strokeWidth:o?24*Number(n)/Number(r):n,className:["lucide",`lucide-${l(e)}`,c].join(" "),...u},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return s.displayName=`${e}`,s},o=n("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),c=n("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var d=s(9101);let u=(0,a.memo)(function({product:e,onAddToCart:t}){return(0,r.jsxs)("div",{className:"group rounded-lg border bg-white p-4 shadow-sm transition-shadow hover:shadow-md",children:[r.jsx("div",{className:"relative mb-4 aspect-square overflow-hidden rounded-lg bg-gray-200",children:e.imageUrl?r.jsx(d.default,{src:e.imageUrl,alt:e.name,fill:!0,sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",className:"object-cover transition-transform group-hover:scale-105",loading:"lazy"}):r.jsx("div",{className:"flex h-full items-center justify-center text-gray-400",children:"No Image"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"mb-2 font-semibold line-clamp-2",children:e.name}),e.rating&&(0,r.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[r.jsx("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(t=>r.jsx(o,{className:`h-4 w-4 ${t<=Math.round(e.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},t))}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["(",e.reviewCount||0,")"]})]}),(0,r.jsxs)("p",{className:"mb-4 text-2xl font-bold text-blue-600",children:["$",e.price.toFixed(2)]}),(0,r.jsxs)("button",{onClick:s=>t?.(s,e.id),className:"flex w-full items-center justify-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":`Add ${e.name} to cart`,children:[r.jsx(c,{className:"h-5 w-5"}),r.jsx("span",{children:"Add to Cart"})]})]})]})});class h{constructor(){this.listeners=new Map,this.eventHistory=[],this.maxHistorySize=50}publish(e,t){this.eventHistory.push({type:e,payload:t}),this.eventHistory.length>this.maxHistorySize&&this.eventHistory.shift();let s=this.listeners.get(e);s&&s.forEach(s=>{try{s(t)}catch(t){console.error(`[EventBus] Error in handler for "${e}":`,t)}})}subscribe(e,t){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t),()=>{let s=this.listeners.get(e);s&&(s.delete(t),0===s.size&&this.listeners.delete(e))}}subscribeMultiple(e){let t=e.map(({type:e,handler:t})=>this.subscribe(e,t));return()=>{t.forEach(e=>e())}}getHistory(){return[...this.eventHistory]}clearHistory(){this.eventHistory=[]}getActiveSubscriptions(){let e=new Map;return this.listeners.forEach((t,s)=>{e.set(s,t.size)}),e}clear(){this.listeners.clear(),this.eventHistory=[]}}let p=new h;class m{constructor(){this.metrics=[],this.marks=new Map}mark(e){this.marks.set(e,performance.now())}measure(e,t,s){let r=this.marks.get(t);if(!r)return null;let a=performance.now()-r;return this.metrics.push({name:e,duration:a,timestamp:Date.now(),mfeName:s}),this.marks.delete(t),a}getMetrics(){return[...this.metrics]}clearMetrics(){this.metrics=[]}reportToAnalytics(){}}new m;class g{constructor(){this.flags=new Map,this.environment="development"}initialize(e){this.environment=e.environment||"development",Object.entries(e.flags).forEach(([e,t])=>{this.flags.set(e,t)}),console.log(`[FeatureFlags] Initialized with ${this.flags.size} flags in ${this.environment} mode`)}isEnabled(e,t){let s=this.flags.get(e);if(!s)return console.warn(`[FeatureFlags] Flag "${e}" not found, defaulting to false`),!1;if(t&&s.mfeScope&&!s.mfeScope.includes(t))return!1;if(void 0!==s.rolloutPercentage&&s.rolloutPercentage<100){let t=this.getUserId();return this.hashString(`${e}-${t}`)%100<s.rolloutPercentage}return s.enabled}setFlag(e,t){let s=this.flags.get(e);s&&(s.enabled=t,this.flags.set(e,s),console.log(`[FeatureFlags] Updated flag "${e}" to ${t}`))}getAllFlags(){return Array.from(this.flags.values())}getUserId(){return"server"}hashString(e){let t=0;for(let s=0;s<e.length;s++)t=(t<<5)-t+e.charCodeAt(s),t&=t;return Math.abs(t)}}new g,process.env.NEXT_PUBLIC_API_GATEWAY,process.env.NEXT_PUBLIC_SHELL_URL,process.env.NEXT_PUBLIC_SEARCH_URL,process.env.NEXT_PUBLIC_WISHLIST_URL,process.env.NEXT_PUBLIC_REVIEWS_URL,process.env.NEXT_PUBLIC_PRODUCTS_URL,process.env.NEXT_PUBLIC_CART_URL,process.env.NEXT_PUBLIC_ENABLE_ANALYTICS,process.env.NEXT_PUBLIC_ENABLE_ERROR_TRACKING,process.env.NEXT_PUBLIC_ENABLE_PERFORMANCE,process.env.NEXT_PUBLIC_CDN_URL;class x{constructor(){this.state={user:null,token:null,isAuthenticated:!1,isLoading:!0},this.tokenKey="mfe_auth_token",this.userKey="mfe_user_data"}initialize(){}login(e,t){this.setState({user:e,token:t,isAuthenticated:!0,isLoading:!1}),p.publish("auth:login",{user:e,token:t})}logout(){this.clearAuth(),p.publish("auth:logout",{})}updateUser(e){if(!this.state.user)return;let t={...this.state.user,...e};this.setState({...this.state,user:t})}getToken(){return this.state.token}getUser(){return this.state.user}isAuthenticated(){return this.state.isAuthenticated}getState(){return{...this.state}}setState(e){this.state=e}clearAuth(){this.setState({user:null,token:null,isAuthenticated:!1,isLoading:!1})}}new x;var v=s(4455),f=s(7846);function y({onProductClick:e,products:t=[],filters:s,loading:i,limit:l,className:n}){var o;let c=(o="cart:add",(0,a.useCallback)(e=>{p.publish(o,e)},[o])),d=(0,v.NL)(),h=l?t.slice(0,l):t,m=e=>{d.prefetchQuery({queryKey:["product",e],queryFn:()=>(0,f.d)(e),staleTime:3e5})},g=(e,t)=>{e.stopPropagation(),c({productId:t,quantity:1})};return i?r.jsx("div",{className:`grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 ${n||""}`,children:[1,2,3,4,5,6].map(e=>r.jsx("div",{className:"animate-pulse",children:(0,r.jsxs)("div",{className:"rounded-lg border bg-white p-4",children:[r.jsx("div",{className:"mb-4 aspect-square rounded-lg bg-gray-200"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})},e))}):0===t.length?r.jsx("div",{className:`text-center py-12 ${n||""}`,children:r.jsx("p",{className:"text-gray-500 text-lg",children:"No products found"})}):r.jsx("div",{className:`grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 ${n||""}`,children:h.map(t=>r.jsx("div",{onClick:()=>e?.(t),onKeyDown:s=>"Enter"===s.key&&e?.(t),onMouseEnter:()=>m(t.id),role:"button",tabIndex:0,className:"cursor-pointer",children:r.jsx(u,{product:t,onAddToCart:g})},t.id))})}var b=s(3356),w=s(2854),N=s(527);function j(){let{data:e=[],isLoading:t,error:s,refetch:a}=(0,b.rn)(),i=(0,w.useRouter)();return(0,r.jsxs)("div",{className:"container mx-auto p-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Products"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Browse our product catalog"})]}),s&&r.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-yellow-800 font-medium",children:["⚠️ ",s.message||"Failed to load products"]}),!1]}),r.jsx("button",{onClick:()=>a(),className:"text-sm text-yellow-700 hover:text-yellow-900 underline",children:"Retry"})]})}),r.jsx(y,{products:e,loading:t,onProductClick:e=>{(0,N.A0)({productId:e.id,productName:e.name,category:e.category,price:e.price}),i.push(`/products/${e.id}`)}}),!1,(0,r.jsxs)("div",{className:"mt-8 p-4 bg-blue-50 rounded",children:[r.jsx("h3",{className:"font-bold mb-2",children:"\uD83C\uDFAF Module Info"}),(0,r.jsxs)("ul",{className:"text-sm space-y-1",children:[r.jsx("li",{children:"✅ Port: 3004"}),r.jsx("li",{children:"✅ Exposed: ProductGrid, ProductCard, ProductDetail"}),r.jsx("li",{children:"✅ Team: Commerce Team"}),r.jsx("li",{children:"✅ Deployable: Independently"})]})]})]})}},151:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(3189).createProxy)(String.raw`/Users/siddharthy/Shweta-S/Learn/shopping-app/apps/mfe-products/src/app/page.tsx#default`)}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[193,873,751,984],()=>s(6813));module.exports=r})();